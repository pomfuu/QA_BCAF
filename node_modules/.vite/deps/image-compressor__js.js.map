{
  "version": 3,
  "sources": ["../../image-compressor.js/dist/image-compressor.esm.js"],
  "sourcesContent": ["/*!\r\n * Image Compressor v1.1.4\r\n * https://xkeshi.github.io/image-compressor\r\n *\r\n * Copyright 2017-present Chen Fengyuan\r\n * Released under the MIT license\r\n *\r\n * Date: 2018-06-20T07:28:41.051Z\r\n */\r\n\r\nfunction createCommonjsModule(fn, module) {\r\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\r\n}\r\n\r\nvar canvasToBlob = createCommonjsModule(function (module) {\r\n(function (window) {\r\n\r\n  var CanvasPrototype =\r\n    window.HTMLCanvasElement && window.HTMLCanvasElement.prototype;\r\n  var hasBlobConstructor =\r\n    window.Blob &&\r\n    (function () {\r\n      try {\r\n        return Boolean(new Blob())\r\n      } catch (e) {\r\n        return false\r\n      }\r\n    })();\r\n  var hasArrayBufferViewSupport =\r\n    hasBlobConstructor &&\r\n    window.Uint8Array &&\r\n    (function () {\r\n      try {\r\n        return new Blob([new Uint8Array(100)]).size === 100\r\n      } catch (e) {\r\n        return false\r\n      }\r\n    })();\r\n  var BlobBuilder =\r\n    window.BlobBuilder ||\r\n    window.WebKitBlobBuilder ||\r\n    window.MozBlobBuilder ||\r\n    window.MSBlobBuilder;\r\n  var dataURIPattern = /^data:((.*?)(;charset=.*?)?)(;base64)?,/;\r\n  var dataURLtoBlob =\r\n    (hasBlobConstructor || BlobBuilder) &&\r\n    window.atob &&\r\n    window.ArrayBuffer &&\r\n    window.Uint8Array &&\r\n    function (dataURI) {\r\n      var matches,\r\n        mediaType,\r\n        isBase64,\r\n        dataString,\r\n        byteString,\r\n        arrayBuffer,\r\n        intArray,\r\n        i,\r\n        bb;\r\n      // Parse the dataURI components as per RFC 2397\r\n      matches = dataURI.match(dataURIPattern);\r\n      if (!matches) {\r\n        throw new Error('invalid data URI')\r\n      }\r\n      // Default to text/plain;charset=US-ASCII\r\n      mediaType = matches[2]\r\n        ? matches[1]\r\n        : 'text/plain' + (matches[3] || ';charset=US-ASCII');\r\n      isBase64 = !!matches[4];\r\n      dataString = dataURI.slice(matches[0].length);\r\n      if (isBase64) {\r\n        // Convert base64 to raw binary data held in a string:\r\n        byteString = atob(dataString);\r\n      } else {\r\n        // Convert base64/URLEncoded data component to raw binary:\r\n        byteString = decodeURIComponent(dataString);\r\n      }\r\n      // Write the bytes of the string to an ArrayBuffer:\r\n      arrayBuffer = new ArrayBuffer(byteString.length);\r\n      intArray = new Uint8Array(arrayBuffer);\r\n      for (i = 0; i < byteString.length; i += 1) {\r\n        intArray[i] = byteString.charCodeAt(i);\r\n      }\r\n      // Write the ArrayBuffer (or ArrayBufferView) to a blob:\r\n      if (hasBlobConstructor) {\r\n        return new Blob([hasArrayBufferViewSupport ? intArray : arrayBuffer], {\r\n          type: mediaType\r\n        })\r\n      }\r\n      bb = new BlobBuilder();\r\n      bb.append(arrayBuffer);\r\n      return bb.getBlob(mediaType)\r\n    };\r\n  if (window.HTMLCanvasElement && !CanvasPrototype.toBlob) {\r\n    if (CanvasPrototype.mozGetAsFile) {\r\n      CanvasPrototype.toBlob = function (callback, type, quality) {\r\n        var self = this;\r\n        setTimeout(function () {\r\n          if (quality && CanvasPrototype.toDataURL && dataURLtoBlob) {\r\n            callback(dataURLtoBlob(self.toDataURL(type, quality)));\r\n          } else {\r\n            callback(self.mozGetAsFile('blob', type));\r\n          }\r\n        });\r\n      };\r\n    } else if (CanvasPrototype.toDataURL && dataURLtoBlob) {\r\n      CanvasPrototype.toBlob = function (callback, type, quality) {\r\n        var self = this;\r\n        setTimeout(function () {\r\n          callback(dataURLtoBlob(self.toDataURL(type, quality)));\r\n        });\r\n      };\r\n    }\r\n  }\r\n  if (typeof undefined === 'function' && undefined.amd) {\r\n    undefined(function () {\r\n      return dataURLtoBlob\r\n    });\r\n  } else if (module.exports) {\r\n    module.exports = dataURLtoBlob;\r\n  } else {\r\n    window.dataURLtoBlob = dataURLtoBlob;\r\n  }\r\n})(window);\r\n});\r\n\r\n/* globals Blob */\r\nvar toString = Object.prototype.toString;\r\n\r\nvar isBlob = function (x) {\r\n\treturn x instanceof Blob || toString.call(x) === '[object Blob]';\r\n};\r\n\r\nvar DEFAULTS = {\r\n  /**\r\n   * Indicates if read the image's Exif Orientation information,\r\n   * and then rotate or flip the image automatically.\r\n   * @type {boolean}\r\n   */\r\n  checkOrientation: true,\r\n\r\n  /**\r\n   * The max width of the output image.\r\n   * @type {number}\r\n   */\r\n  maxWidth: Infinity,\r\n\r\n  /**\r\n   * The max height of the output image.\r\n   * @type {number}\r\n   */\r\n  maxHeight: Infinity,\r\n\r\n  /**\r\n   * The min width of the output image.\r\n   * @type {number}\r\n   */\r\n  minWidth: 0,\r\n\r\n  /**\r\n   * The min height of the output image.\r\n   * @type {number}\r\n   */\r\n  minHeight: 0,\r\n\r\n  /**\r\n   * The width of the output image.\r\n   * If not specified, the natural width of the source image will be used.\r\n   * @type {number}\r\n   */\r\n  width: undefined,\r\n\r\n  /**\r\n   * The height of the output image.\r\n   * If not specified, the natural height of the source image will be used.\r\n   * @type {number}\r\n   */\r\n  height: undefined,\r\n\r\n  /**\r\n   * The quality of the output image.\r\n   * It must be a number between `0` and `1`,\r\n   * and only available for `image/jpeg` and `image/webp` images.\r\n   * Check out {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob canvas.toBlob}.\r\n   * @type {number}\r\n   */\r\n  quality: 0.8,\r\n\r\n  /**\r\n   * The mime type of the output image.\r\n   * By default, the original mime type of the source image file will be used.\r\n   * @type {string}\r\n   */\r\n  mimeType: 'auto',\r\n\r\n  /**\r\n   * PNG files over this value (5M by default) will be converted to JPEGs.\r\n   * To disable this, just set the value to `Infinity`.\r\n   * Check out {@link https://github.com/xkeshi/image-compressor/issues/2 #2}.\r\n   * @type {number}\r\n   */\r\n  convertSize: 5000000,\r\n\r\n  /**\r\n   * The hook function to execute before draw the image into the canvas for compression.\r\n   * @type {Function}\r\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\r\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\r\n   * @example\r\n   * function (context, canvas) { context.fillStyle = '#fff' }\r\n   */\r\n  beforeDraw: null,\r\n\r\n  /**\r\n   * The hook function to execute after drew the image into the canvas for compression.\r\n   * @type {Function}\r\n   * @param {CanvasRenderingContext2D} context - The 2d rendering context of the canvas.\r\n   * @param {HTMLCanvasElement} canvas - The canvas for compression.\r\n   * @example\r\n   * function (context, canvas) { context.filter = grayscale(100%) }\r\n   */\r\n  drew: null,\r\n\r\n  /**\r\n   * The hook function to execute when success to compress the image.\r\n   * @type {Function}\r\n   * @param {File} file - The compressed image File object.\r\n   * @example\r\n   * function (file) { console.log(file) }\r\n   */\r\n  success: null,\r\n\r\n  /**\r\n   * The hook function to execute when fail to compress the image.\r\n   * @type {Function}\r\n   * @param {Error} err - An Error object.\r\n   * @example\r\n   * function (err) { console.log(err.message) }\r\n   */\r\n  error: null\r\n};\r\n\r\nvar REGEXP_IMAGE_TYPE = /^image\\/.+$/;\r\n\r\n/**\r\n * Check if the given value is a mime type of image.\r\n * @param {*} value - The value to check.\r\n * @returns {boolean} Returns `true` if the given is a mime type of image, else `false`.\r\n */\r\nfunction isImageType(value) {\r\n  return REGEXP_IMAGE_TYPE.test(value);\r\n}\r\n\r\n/**\r\n * Convert image type to extension.\r\n * @param {string} value - The image type to convert.\r\n * @param {boolean} [includeDot=true] - Include a leading dot or not.\r\n * @returns {boolean} Returns the image extension.\r\n */\r\nfunction imageTypeToExtension(value) {\r\n  var includeDot = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\r\n\r\n  var extension = isImageType(value) ? value.substr(6) : '';\r\n\r\n  if (extension === 'jpeg') {\r\n    extension = 'jpg';\r\n  }\r\n\r\n  if (extension && includeDot) {\r\n    extension = '.' + extension;\r\n  }\r\n\r\n  return extension;\r\n}\r\n\r\nvar fromCharCode = String.fromCharCode;\r\n\r\n/**\r\n * Get string from char code in data view.\r\n * @param {DataView} dataView - The data view for read.\r\n * @param {number} start - The start index.\r\n * @param {number} length - The read length.\r\n * @returns {string} The read result.\r\n */\r\n\r\nfunction getStringFromCharCode(dataView, start, length) {\r\n  var str = '';\r\n  var i = void 0;\r\n\r\n  length += start;\r\n\r\n  for (i = start; i < length; i += 1) {\r\n    str += fromCharCode(dataView.getUint8(i));\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nvar _window = window,\r\n    btoa = _window.btoa;\r\n\r\n/**\r\n * Transform array buffer to Data URL.\r\n * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\r\n * @param {string} mimeType - The mime type of the Data URL.\r\n * @returns {string} The result Data URL.\r\n */\r\n\r\nfunction arrayBufferToDataURL(arrayBuffer, mimeType) {\r\n  var uint8 = new Uint8Array(arrayBuffer);\r\n  var data = '';\r\n\r\n  // TypedArray.prototype.forEach is not supported in some browsers as IE.\r\n  if (typeof uint8.forEach === 'function') {\r\n    uint8.forEach(function (value) {\r\n      data += fromCharCode(value);\r\n    });\r\n  } else {\r\n    var length = uint8.length;\r\n\r\n\r\n    for (var i = 0; i < length; i += 1) {\r\n      data += fromCharCode(uint8[i]);\r\n    }\r\n  }\r\n\r\n  return 'data:' + mimeType + ';base64,' + btoa(data);\r\n}\r\n\r\n/**\r\n * Get orientation value from given array buffer.\r\n * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\r\n * @returns {number} The read orientation value.\r\n */\r\nfunction getOrientation(arrayBuffer) {\r\n  var dataView = new DataView(arrayBuffer);\r\n  var orientation = void 0;\r\n  var littleEndian = void 0;\r\n  var app1Start = void 0;\r\n  var ifdStart = void 0;\r\n\r\n  // Only handle JPEG image (start by 0xFFD8)\r\n  if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\r\n    var length = dataView.byteLength;\r\n    var offset = 2;\r\n\r\n    while (offset < length) {\r\n      if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\r\n        app1Start = offset;\r\n        break;\r\n      }\r\n\r\n      offset += 1;\r\n    }\r\n  }\r\n\r\n  if (app1Start) {\r\n    var exifIDCode = app1Start + 4;\r\n    var tiffOffset = app1Start + 10;\r\n\r\n    if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\r\n      var endianness = dataView.getUint16(tiffOffset);\r\n\r\n      littleEndian = endianness === 0x4949;\r\n\r\n      if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\r\n          if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\r\n            var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\r\n\r\n            if (firstIFDOffset >= 0x00000008) {\r\n              ifdStart = tiffOffset + firstIFDOffset;\r\n            }\r\n          }\r\n        }\r\n    }\r\n  }\r\n\r\n  if (ifdStart) {\r\n    var _length = dataView.getUint16(ifdStart, littleEndian);\r\n    var _offset = void 0;\r\n    var i = void 0;\r\n\r\n    for (i = 0; i < _length; i += 1) {\r\n      _offset = ifdStart + i * 12 + 2;\r\n\r\n      if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\r\n          // 8 is the offset of the current tag's value\r\n          _offset += 8;\r\n\r\n          // Get the original orientation value\r\n          orientation = dataView.getUint16(_offset, littleEndian);\r\n\r\n          // Override the orientation with its default value\r\n          dataView.setUint16(_offset, 1, littleEndian);\r\n          break;\r\n        }\r\n    }\r\n  }\r\n\r\n  return orientation;\r\n}\r\n\r\n/**\r\n * Parse Exif Orientation value.\r\n * @param {number} orientation - The orientation to parse.\r\n * @returns {Object} The parsed result.\r\n */\r\nfunction parseOrientation(orientation) {\r\n  var rotate = 0;\r\n  var scaleX = 1;\r\n  var scaleY = 1;\r\n\r\n  switch (orientation) {\r\n    // Flip horizontal\r\n    case 2:\r\n      scaleX = -1;\r\n      break;\r\n\r\n    // Rotate left 180°\r\n    case 3:\r\n      rotate = -180;\r\n      break;\r\n\r\n    // Flip vertical\r\n    case 4:\r\n      scaleY = -1;\r\n      break;\r\n\r\n    // Flip vertical and rotate right 90°\r\n    case 5:\r\n      rotate = 90;\r\n      scaleY = -1;\r\n      break;\r\n\r\n    // Rotate right 90°\r\n    case 6:\r\n      rotate = 90;\r\n      break;\r\n\r\n    // Flip horizontal and rotate right 90°\r\n    case 7:\r\n      rotate = 90;\r\n      scaleX = -1;\r\n      break;\r\n\r\n    // Rotate left 90°\r\n    case 8:\r\n      rotate = -90;\r\n      break;\r\n\r\n    default:\r\n  }\r\n\r\n  return {\r\n    rotate: rotate,\r\n    scaleX: scaleX,\r\n    scaleY: scaleY\r\n  };\r\n}\r\n\r\nvar REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/i;\r\n\r\n/**\r\n * Normalize decimal number.\r\n * Check out {@link http://0.30000000000000004.com/}\r\n * @param {number} value - The value to normalize.\r\n * @param {number} [times=100000000000] - The times for normalizing.\r\n * @returns {number} Returns the normalized number.\r\n */\r\nfunction normalizeDecimalNumber(value) {\r\n  var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\r\n\r\n  return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\r\n}\r\n\r\nvar classCallCheck = function (instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n};\r\n\r\nvar createClass = function () {\r\n  function defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  return function (Constructor, protoProps, staticProps) {\r\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  };\r\n}();\r\n\r\nvar _extends = Object.assign || function (target) {\r\n  for (var i = 1; i < arguments.length; i++) {\r\n    var source = arguments[i];\r\n\r\n    for (var key in source) {\r\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\r\n        target[key] = source[key];\r\n      }\r\n    }\r\n  }\r\n\r\n  return target;\r\n};\r\n\r\nvar _window$1 = window,\r\n    ArrayBuffer$1 = _window$1.ArrayBuffer,\r\n    FileReader = _window$1.FileReader;\r\n\r\nvar URL = window.URL || window.webkitURL;\r\nvar REGEXP_EXTENSION = /\\.\\w+$/;\r\n\r\n/**\r\n * Creates a new image compressor.\r\n * @class\r\n */\r\n\r\nvar ImageCompressor = function () {\r\n  /**\r\n   * The constructor of ImageCompressor.\r\n   * @param {File|Blob} file - The target image file for compressing.\r\n   * @param {Object} [options] - The options for compressing.\r\n   */\r\n  function ImageCompressor(file, options) {\r\n    classCallCheck(this, ImageCompressor);\r\n\r\n    this.result = null;\r\n\r\n    if (file) {\r\n      this.compress(file, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The main compress method.\r\n   * @param {File|Blob} file - The target image file for compressing.\r\n   * @param {Object} [options] - The options for compressing.\r\n   * @returns {Promise} - A Promise instance.\r\n   */\r\n\r\n\r\n  createClass(ImageCompressor, [{\r\n    key: 'compress',\r\n    value: function compress(file, options) {\r\n      var _this = this;\r\n\r\n      var image = new Image();\r\n\r\n      options = _extends({}, DEFAULTS, options);\r\n\r\n      if (!ArrayBuffer$1) {\r\n        options.checkOrientation = false;\r\n      }\r\n\r\n      return new Promise(function (resolve, reject) {\r\n        if (!isBlob(file)) {\r\n          reject(new Error('The first argument must be a File or Blob object.'));\r\n          return;\r\n        }\r\n\r\n        var mimeType = file.type;\r\n\r\n        if (!isImageType(mimeType)) {\r\n          reject(new Error('The first argument must be an image File or Blob object.'));\r\n          return;\r\n        }\r\n\r\n        if (!URL && !FileReader) {\r\n          reject(new Error('The current browser does not support image compression.'));\r\n          return;\r\n        }\r\n\r\n        if (URL && !options.checkOrientation) {\r\n          resolve({\r\n            url: URL.createObjectURL(file)\r\n          });\r\n        } else if (FileReader) {\r\n          var reader = new FileReader();\r\n          var checkOrientation = options.checkOrientation && mimeType === 'image/jpeg';\r\n\r\n          reader.onload = function (_ref) {\r\n            var target = _ref.target;\r\n            var result = target.result;\r\n\r\n\r\n            resolve(checkOrientation ? _extends({\r\n              url: arrayBufferToDataURL(result, mimeType)\r\n            }, parseOrientation(getOrientation(result))) : {\r\n              url: result\r\n            });\r\n          };\r\n          reader.onabort = function () {\r\n            reject(new Error('Aborted to load the image with FileReader.'));\r\n          };\r\n          reader.onerror = function () {\r\n            reject(new Error('Failed to load the image with FileReader.'));\r\n          };\r\n\r\n          if (checkOrientation) {\r\n            reader.readAsArrayBuffer(file);\r\n          } else {\r\n            reader.readAsDataURL(file);\r\n          }\r\n        }\r\n      }).then(function (data) {\r\n        return new Promise(function (resolve, reject) {\r\n          image.onload = function () {\r\n            return resolve(_extends({}, data, {\r\n              naturalWidth: image.naturalWidth,\r\n              naturalHeight: image.naturalHeight\r\n            }));\r\n          };\r\n          image.onabort = function () {\r\n            reject(new Error('Aborted to load the image.'));\r\n          };\r\n          image.onerror = function () {\r\n            reject(new Error('Failed to load the image.'));\r\n          };\r\n          image.alt = file.name;\r\n          image.src = data.url;\r\n        });\r\n      }).then(function (_ref2) {\r\n        var naturalWidth = _ref2.naturalWidth,\r\n            naturalHeight = _ref2.naturalHeight,\r\n            _ref2$rotate = _ref2.rotate,\r\n            rotate = _ref2$rotate === undefined ? 0 : _ref2$rotate,\r\n            _ref2$scaleX = _ref2.scaleX,\r\n            scaleX = _ref2$scaleX === undefined ? 1 : _ref2$scaleX,\r\n            _ref2$scaleY = _ref2.scaleY,\r\n            scaleY = _ref2$scaleY === undefined ? 1 : _ref2$scaleY;\r\n        return new Promise(function (resolve) {\r\n          var canvas = document.createElement('canvas');\r\n          var context = canvas.getContext('2d');\r\n          var aspectRatio = naturalWidth / naturalHeight;\r\n          var maxWidth = Math.max(options.maxWidth, 0) || Infinity;\r\n          var maxHeight = Math.max(options.maxHeight, 0) || Infinity;\r\n          var minWidth = Math.max(options.minWidth, 0) || 0;\r\n          var minHeight = Math.max(options.minHeight, 0) || 0;\r\n          var width = naturalWidth;\r\n          var height = naturalHeight;\r\n\r\n          if (maxWidth < Infinity && maxHeight < Infinity) {\r\n            if (maxHeight * aspectRatio > maxWidth) {\r\n              maxHeight = maxWidth / aspectRatio;\r\n            } else {\r\n              maxWidth = maxHeight * aspectRatio;\r\n            }\r\n          } else if (maxWidth < Infinity) {\r\n            maxHeight = maxWidth / aspectRatio;\r\n          } else if (maxHeight < Infinity) {\r\n            maxWidth = maxHeight * aspectRatio;\r\n          }\r\n\r\n          if (minWidth > 0 && minHeight > 0) {\r\n            if (minHeight * aspectRatio > minWidth) {\r\n              minHeight = minWidth / aspectRatio;\r\n            } else {\r\n              minWidth = minHeight * aspectRatio;\r\n            }\r\n          } else if (minWidth > 0) {\r\n            minHeight = minWidth / aspectRatio;\r\n          } else if (minHeight > 0) {\r\n            minWidth = minHeight * aspectRatio;\r\n          }\r\n\r\n          if (options.width > 0) {\r\n            var _options = options;\r\n            width = _options.width;\r\n\r\n            height = width / aspectRatio;\r\n          } else if (options.height > 0) {\r\n            var _options2 = options;\r\n            height = _options2.height;\r\n\r\n            width = height * aspectRatio;\r\n          }\r\n\r\n          width = Math.min(Math.max(width, minWidth), maxWidth);\r\n          height = Math.min(Math.max(height, minHeight), maxHeight);\r\n\r\n          var destX = -width / 2;\r\n          var destY = -height / 2;\r\n          var destWidth = width;\r\n          var destHeight = height;\r\n\r\n          if (Math.abs(rotate) % 180 === 90) {\r\n            var _width$height = {\r\n              width: height,\r\n              height: width\r\n            };\r\n            width = _width$height.width;\r\n            height = _width$height.height;\r\n          }\r\n\r\n          canvas.width = normalizeDecimalNumber(width);\r\n          canvas.height = normalizeDecimalNumber(height);\r\n\r\n          if (!isImageType(options.mimeType)) {\r\n            options.mimeType = file.type;\r\n          }\r\n\r\n          var defaultFillStyle = 'transparent';\r\n\r\n          // Converts PNG files over the `convertSize` to JPEGs.\r\n          if (file.size > options.convertSize && options.mimeType === 'image/png') {\r\n            defaultFillStyle = '#fff';\r\n            options.mimeType = 'image/jpeg';\r\n          }\r\n\r\n          // Override the default fill color (#000, black)\r\n          context.fillStyle = defaultFillStyle;\r\n          context.fillRect(0, 0, width, height);\r\n          context.save();\r\n          context.translate(width / 2, height / 2);\r\n          context.rotate(rotate * Math.PI / 180);\r\n          context.scale(scaleX, scaleY);\r\n\r\n          if (options.beforeDraw) {\r\n            options.beforeDraw.call(_this, context, canvas);\r\n          }\r\n\r\n          context.drawImage(image, Math.floor(normalizeDecimalNumber(destX)), Math.floor(normalizeDecimalNumber(destY)), Math.floor(normalizeDecimalNumber(destWidth)), Math.floor(normalizeDecimalNumber(destHeight)));\r\n\r\n          if (options.drew) {\r\n            options.drew.call(_this, context, canvas);\r\n          }\r\n\r\n          context.restore();\r\n\r\n          var done = function done(result) {\r\n            resolve({\r\n              naturalWidth: naturalWidth,\r\n              naturalHeight: naturalHeight,\r\n              result: result\r\n            });\r\n          };\r\n\r\n          if (canvas.toBlob) {\r\n            canvas.toBlob(done, options.mimeType, options.quality);\r\n          } else {\r\n            done(canvasToBlob(canvas.toDataURL(options.mimeType, options.quality)));\r\n          }\r\n        });\r\n      }).then(function (_ref3) {\r\n        var naturalWidth = _ref3.naturalWidth,\r\n            naturalHeight = _ref3.naturalHeight,\r\n            result = _ref3.result;\r\n\r\n        if (URL && !options.checkOrientation) {\r\n          URL.revokeObjectURL(image.src);\r\n        }\r\n\r\n        if (result) {\r\n          // Returns original file if the result is greater than it and without size related options\r\n          if (result.size > file.size && options.mimeType === file.type && !(options.width > naturalWidth || options.height > naturalHeight || options.minWidth > naturalWidth || options.minHeight > naturalHeight)) {\r\n            result = file;\r\n          } else {\r\n            var date = new Date();\r\n\r\n            result.lastModified = date.getTime();\r\n            result.lastModifiedDate = date;\r\n            result.name = file.name;\r\n\r\n            // Convert the extension to match its type\r\n            if (result.name && result.type !== file.type) {\r\n              result.name = result.name.replace(REGEXP_EXTENSION, imageTypeToExtension(result.type));\r\n            }\r\n          }\r\n        } else {\r\n          // Returns original file if the result is null in some cases.\r\n          result = file;\r\n        }\r\n\r\n        _this.result = result;\r\n\r\n        if (options.success) {\r\n          options.success.call(_this, result);\r\n        }\r\n\r\n        return Promise.resolve(result);\r\n      }).catch(function (err) {\r\n        if (!options.error) {\r\n          throw err;\r\n        }\r\n\r\n        options.error.call(_this, err);\r\n      });\r\n    }\r\n  }]);\r\n  return ImageCompressor;\r\n}();\r\n\r\nexport default ImageCompressor;\r\n"],
  "mappings": "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",
  "names": ["window", "ImageCompressor", "done"]
}
